---
title: Configurando Ambientes Virtuais com pipenv
layout: reveal-js
asciinema: true
theme: beige
---

<section style="font-size: 0.85em">
    <h1>{{ page.title }}</h1>
    <h2>Encontro Python Sergipe #5</h2>
    <h3>Wagner Macedo</h3>
</section>

<section>
    <section><h1>Hist√≥ria do empacotamento de Python</h1></section>
    <section>
        <h2>Antes da hist√≥ria</h2>
        <p>Python surgiu oficialmente em 1991.</p>
        <p>At√© o ano de 2000, n√£o existia ainda uma solu√ß√£o para o problema do empacotamento de bibliotecas.</p>
        <blockquote>Adicionar uma depend√™ncia ao seu projeto era uma verdadeira odiss√©ia üí™Ô∏è</blockquote>
    </section>
    <section>
        <h3>Como era instalada uma biblioteca?</h3>
        <p>
            Era preciso copiar os arquivos <b>.py</b> para os locais certos e, se houvesse algum p√≥s-instala√ß√£o, era
            preciso seguir as instru√ß√µes do autor da biblioteca (se houvesse üò±).
        </p>
    </section>
    <section>
        <h2>Distutils</h2>
        <ul>
            <li>Desenvolvimento iniciou em 1998</li>
            <li>Introduziu o famoso <code>setup.py</code>
                <ul>
                    <li>Instalar um projeto</li>
                    <li>Gerar um <em>tarball</em></li>
                </ul>
            </li>
            <li><u>2000</u>: Adicionado ao Python 1.6</li>
            <li>N√£o havia, ainda, um reposit√≥rio central.</li>
        </ul>
    </section>
    <section>
        <h2>PyPI</h2>
        <ul>
            <li><u>2003</u>: <b>PyPI</b> (<em>Python Packaging Index</em>)</li>
            <li>Adicionou metadados ao <code>setup.py</code></li>
        </ul>
        <p>Era conhecido por <em>Cheeseshop</em> üòÜ</p>
    </section>
    <section>
        <h2>Setuptools</h2>
        <ul>
            <li>Uma gama de extens√µes ao <em>Setuptools</em>
                <ul>
                    <li>Declara√ß√£o de depend√™ncias</li>
                    <li>Configurar scripts de instala√ß√£o</li>
                </ul>
            </li>
            <li><u>2004</u>: Formato de instala√ß√£o bin√°ria (<code>egg</code>)</li>
            <li><u>2005</u>: Surge o comando <code>easy_install</code>
                <ul>
                    <li>Instala√ß√£o de pacotes da Internet üòé</li>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h3>O problema de pacotes compartilhados</h3>
        <p>Os pacotes Python s√£o todos instalados no mesmo local. Isso traz dois grandes problemas:</p>
        <ol>
            <li>Diferentes aplica√ß√µes podem requerer diferentes vers√µes de uma mesma biblioteca.</li>
            <li>Saber as depend√™ncias m√≠nimas de uma aplica√ß√£o em desenvolvimento √© muito dif√≠cil.</li>
        </ol>
    </section>
    <section>
        <h2>Virtualenv</h2>
        <ul>
            <li><u>2007</u>: Ambientes virtuais de Python
                <ul>
                    <li>N√£o compartilha os pacotes do sistema</li>
                    <li>Pacotes vis√≠veis apenas em cada <em>virtualenv</em>
                        <ul>
                            <li class="fragment highlight-blue">
                                Reproduz√≠vel</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h3>Setuptools e a biblioteca padr√£o</h3>
        <p>
            As melhorias que o <em>Setuptools</em> trouxe para o empacotamento de Python n√£o haviam entrado na
            biblioteca padr√£o, onde a <em>Distutils</em> estava estagnando.
        </p>
        <p>
            Essa situa√ß√£o ajudou a confundir os desenvolvedores de Python, principalmente os rec√©m-chegados.
        </p>
    </section>
    <section>
        <h2>pip</h2>
        <ul>
            <li><u>2008</u>: <code>pip</code> foi introduzido
                <ul>
                    <li>Alternativa ao <code>easy_install</code></li>
                    <li>Corrige problemas e complexidades</li>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h2>Distribute</h2>
        <ul>
            <li><u>2008</u>: Fork de <em>Setuptools</em></li>
            <li>Um projeto mais aberto</li>
        </ul>
    </section>
    <section>
        <h2>PyPA</h2>
        <ul>
            <li><u>2011</u>: <b>PyPA</b> (<em>Python Packaging Authority</em>)</li>
            <li>Grupo de trabalho para manter:
                <ul>
                    <li><code>pip</code></li>
                    <li><code>virtualenv</code></li>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h2>Setuptools: outra vez!</h2>
        <p>
            Os projetos <em>Distribute</em> e <em>Setuptools</em> deram as m√£os e juntaram os esfor√ßos, ficando apenas o
            nome mais antigo e conhecido.
        </p>
    </section>
    <section>
        <h2>ensurepip</h2>
        <ul>
            <li><b>2014</b>: m√≥dulo oficial para instalar <code>pip</code>
                <ul>
                    <li>A partir de Python 3.4, basta chamar
                    <pre style="font-size: 0.9em"
                    ><code>python -m ensurepip</code></pre>
                    </li>
                </ul>
            </li>
        </ul>
    </section>
</section>

<section>
    <h2>Pipenv</h2>
    <blockquote>
        <p>
            Pipenv is a tool that aims to bring the best of all packaging worlds (bundler, composer, npm, cargo,
            yarn, etc.) to the Python world.
        </p>
        <p>&mdash; Kenneth Reitz</p>
    </blockquote>
</section>

<section>
    <h3>Pipenv em poucas palavras</h3>
    <p><code>pip</code> + <code>virtualenv</code> = <code>pipenv</code></p>
</section>

<section>
    <h2>Sem o Pipenv üò¢</h2>
    <asciinema-player src="sem-pipenv.cast" font-size="medium" cols="90" rows="20"></asciinema-player>
</section>

<section>
    <h2>Com o Pipenv üòÉ</h2>
    <asciinema-player src="com-pipenv.cast" font-size="medium" cols="90" rows="20"></asciinema-player>
</section>

<section>
    <h2>Refer√™ncias</h2>
    <ol>
        <li>https://docs.pipenv.org/</li>
        <li>https://blog.startifact.com/posts/older/a-history-of-python-packaging.html</li>
        <li>https://www.pypa.io/en/latest/history/</li>
        <li>http://glyph.twistedmatrix.com/2016/08/python-packaging.html</li>
    </ol>
</section>
